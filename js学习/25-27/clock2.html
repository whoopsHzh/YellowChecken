<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>clock2</title>
</head>
<body>
    <!-- 第二十五天到第二十七天 倒数开始 滴答滴 滴答滴 -->
    <!-- 参考网址：
    https://blog.csdn.net/sinat_34074514/article/details/81942046
    -->
        <select id="year-select"  onchange="yearToDay(this.value)">
                <option value="">年份</option>
            </select>
            
            <select id="month-select"   onchange="monthToDay(this.value)">
                <option value="">月 </option>
            </select>
            
            <select id="day-select">
                <option value="">日</option>
            </select>
            
            <select id="hour-select">
                <option value="0">00</option>
                <option value="1">01</option>
                <option value="2">02</option>
                <option value="3">03</option>
                <option value="4">04</option>
                <option value="5">05</option>
                <option value="6">06</option>
                <option value="7">07</option>
                <option value="8">08</option>
                <option value="9">09</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
        
            </select>
            
            <select id="minite-select">
                <option value="60">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
                <option value="25">25</option>
                <option value="26">26</option>
                <option value="27">27</option>
                <option value="28">28</option>
                <option value="29">29</option>
                <option value="30">30</option>
                <option value="31">31</option>
                <option value="32">32</option>
                <option value="33">33</option>
                <option value="34">34</option>
                <option value="35">35</option>
                <option value="36">36</option>
                <option value="37">37</option>
                <option value="38">38</option>
                <option value="39">39</option>
                <option value="40">40</option>
                <option value="41">41</option>
                <option value="42">42</option>
                <option value="43">43</option>
                <option value="44">44</option>
                <option value="45">45</option>
                <option value="46">46</option>
                <option value="47">47</option>
                <option value="48">48</option>
                <option value="49">49</option>
                <option value="50">50</option>
                <option value="51">51</option>
                <option value="52">52</option>
                <option value="53">53</option>
                <option value="54">54</option>
                <option value="55">55</option>
                <option value="56">56</option>
                <option value="57">57</option>
                <option value="58">58</option>
                <option value="59">59</option>
            
            </select>
            
            <select id="second-select">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
                <option value="25">25</option>
                <option value="26">26</option>
                <option value="27">27</option>
                <option value="28">28</option>
                <option value="29">29</option>
                <option value="30">30</option>
                <option value="31">31</option>
                <option value="32">32</option>
                <option value="33">33</option>
                <option value="34">34</option>
                <option value="35">35</option>
                <option value="36">36</option>
                <option value="37">37</option>
                <option value="38">38</option>
                <option value="39">39</option>
                <option value="40">40</option>
                <option value="41">41</option>
                <option value="42">42</option>
                <option value="43">43</option>
                <option value="44">44</option>
                <option value="45">45</option>
                <option value="46">46</option>
                <option value="47">47</option>
                <option value="48">48</option>
                <option value="49">49</option>
                <option value="50">50</option>
                <option value="51">51</option>
                <option value="52">52</option>
                <option value="53">53</option>
                <option value="54">54</option>
                <option value="55">55</option>
                <option value="56">56</option>
                <option value="57">57</option>
                <option value="58">58</option>
                <option value="59">59</option>        
            </select>
            
            <p id="result-wrapper">现在距离 2001年1月1日星期X HH:MM:SS 还有 X 天 X 小时 X 分 X 秒</p>


            <script>
                var select =document.getElementsByTagName('select');
                yearSelect = document.getElementById('year-select'),
                monthSelect = document.getElementById('month-select'),
                daySelect = document.getElementById('day-select'),
                hourSelect = document.getElementById('hour-select'),
                miniteSelect = document.getElementById('minite-select'),
                secondSelect = document.getElementById('second-select'),
             
                result = document.getElementById('result-wrapper');

                var monthHead = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
                
                // 封装一个函数，把月、日、小时等出现个位数的情况前面补充0，补充为两位，比如1变为01
                function check(params) {
                    if (params<10) {
                        return '0'+params;
                    }
                    else return params;
                }


                // 根据日期，返回这一天是星期几
                function getWeekDay(d){
                    weekend = ["星期一","星期二","星期三","星期四","星期五","星期六","星期日"];
                    return weekend[d.getDay()];
                }


                // 闰年判断
                function isRunYear(y) {
                    if (y%4==0) {
                        if (y%100!=0) {
                            return true;
                        }
                        else false;
                    }
                    if (y%400==0) {
                        return true;
                    }
                    else false;
                }

                // 增加年、月、选项
                function YMDstart() {
                    for(var i = 2000;i<= 2032;i++){
                        yearSelect.options.add(new Option(i,i));
                    }
                    for (var j = 1;j<=12;j++){
                        monthSelect.options.add(new Option(j,j));
                    }
                    var val = monthSelect.options[monthSelect.selectedIndex].value;
                    var n = monthHead[val - 1];
                    console.log(val);
                    // 闰年的二月是29天，做个闰年判断
                    if (val == 2&&isRunYear(yearSelect.value)) {
                        n++;
                    }
                    writeDay(n);
                }
                //---------------------------------text
                // YMDstart();
                // setInterval(YMDstart,500);


                //年发生改变时日期变化
                function yearToDay(y) {
                    var val = monthSelect.options[monthSelect.selectedIndex].value;
                    if (val=='') {
                        optionsClear(daySelect);
                        return;
                    }
                    var n = monthHead[monthSelect.value-1];
                    if (val==2&&isRunYear(y)) {
                        n++;
                    }
                    writeDay(n);
                }

                // 月变化时，改变日期变化
                function monthToDay(m) {
                    var yval = yearSelect.options[yearSelect.selectedIndex].value;
                    if (yval =='') {
                        optionsClear(day);
                        return;
                    }
                    var n = monthHead[m-1];
                    if (m==2&isRunYear(yval)) {
                        n++;
                    }
                    writeDay(n);
                }

                //增加日选项
                function writeDay(n){
                    optionsClear(daySelect);
                    for(var i = 1;i<=n;i++){
                        daySelect.options.add(new Option(i,i));
                    }
                }
                
                // 删除所有option
                function optionsClear(e){
                    e.options.length=1;
                }

                // 获取所选时间
                function getSelectTime() {
                    var Sday = new Date();
                    Sday.setFullYear(yearSelect.value,monthSelect.value,daySelect.value);
                    return yearSelect.value+"年"+check(monthSelect.value)+"月"+check(daySelect.value)+"日"+getWeekDay(Sday)+" "+check(hourSelect.value)+"时"+check(miniteSelect.value)+"分"+check(secondSelect.value)+"秒";
                }

                //获取当前时间与所选时间之差
                function getTimeNow() {
                    var now = new Date();
                    var timeSelectStr = yearSelect.value + "/" + monthSelect.value + "/" + daySelect.value + " " + hourSelect.value + ":" + miniteSelect.value +
                ":" + secondSelect.value;
                    var timeSelect=new Date(timeSelectStr);
                    var millSeconds = now.getTime()-timeSelect.getTime();
                    var str="还有";
                    if (millSeconds<0) {
                        millSeconds = - millSeconds;
                    }
                    else{
                        str = "已经过去";
                    }
                    millSeconds = parseFloat(millSeconds);
                    var daym = millSeconds/86400000;
                    var hourm = (millSeconds%86400000)/3600000;
                    var minutem = ((millSeconds%86400000)%3600000)/60000;
                    var secondm = (((millSeconds%86400000)%3600000)%60000)/ 1000;
                    return str +parseInt(daym)+"天"+parseInt(hourm) 
                    + "小时" + parseInt(minutem) + "分" + 
                    parseInt(secondm) +"秒";
                }
               
               function strart() {
                   result.innerHTML="现在距离"+getSelectTime()+getTimeNow();
               }
                
                YMDstart();
                setInterval(strart,1000);

                // select[0].onclick =function(){
                //     year = yearSelect.value;
                //     console.log(year);
                // }
                // select[1].onclick =function(){
                //     month = this.value;
                // }
                // select[2].onclick =function(){
                //     day = this.value;
                // }
                // select[3].onclick =function(){
                //     h = this.value;
                // }
                // select[4].onclick =function(){
                //     m = this.value;
                // }
                // select[5].onclick =function(){
                //     s = this.value;
                //     today = getTime();
                //     console.log(today);
                //     console.log(getSelectTime());
                // }
            

                    // function Result() {
                //     var time = getTime();
                //     var selectTime = getSelectTime();
                //     if (time>selectTime) {
                //         result.innerHTML='现在距离'+selectTime+'还有';
                //     }
                //     if (time<selectTime) {
                //         result.innerHTML='现在距离'+selectTime+'还差';
                //     }
                // }
            </script>
</body>
</html>